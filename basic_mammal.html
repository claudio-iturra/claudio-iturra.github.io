<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coastal Marine Mammal Assessment Platform</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            padding: 40px 0;
            background: rgba(0,0,0,0.2);
            border-radius: 15px;
            margin-bottom: 30px;
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            color: #87CEEB;
        }
        
        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .nav-tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .tab-btn {
            padding: 12px 24px;
            background: rgba(255,255,255,0.1);
            border: 2px solid #87CEEB;
            color: white;
            cursor: pointer;
            border-radius: 25px;
            transition: all 0.3s ease;
            font-weight: 500;
        }
        
        .tab-btn:hover, .tab-btn.active {
            background: #87CEEB;
            color: #1e3c72;
            transform: translateY(-2px);
        }
        
        .tab-content {
            display: none;
            background: rgba(255,255,255,0.1);
            padding: 30px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }
        
        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .species-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .species-card {
            background: rgba(255,255,255,0.15);
            padding: 20px;
            border-radius: 12px;
            border-left: 4px solid #87CEEB;
        }
        
        .species-card h3 {
            color: #87CEEB;
            margin-bottom: 10px;
        }
        
        .detection-methods {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .method-card {
            background: linear-gradient(145deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05));
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            transition: transform 0.3s ease;
        }
        
        .method-card:hover {
            transform: translateY(-5px);
        }
        
        .method-icon {
            font-size: 3rem;
            margin-bottom: 15px;
        }
        
        .equation-box {
            background: rgba(0,0,0,0.3);
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            border-left: 4px solid #FFD700;
        }
        
        .equation {
            font-family: 'Courier New', monospace;
            font-size: 1.1rem;
            color: #FFD700;
            text-align: center;
            margin: 10px 0;
        }
        
        .parameter-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
        }
        
        .parameter-card {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 12px;
            border-top: 3px solid #87CEEB;
        }
        
        .calculator {
            background: rgba(255,255,255,0.15);
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
        }
        
        .input-group {
            margin-bottom: 15px;
        }
        
        .input-group label {
            display: block;
            margin-bottom: 5px;
            color: #87CEEB;
            font-weight: 500;
        }
        
        .input-group input, .input-group select {
            width: 100%;
            padding: 10px;
            border: none;
            border-radius: 8px;
            background: rgba(255,255,255,0.9);
            color: #333;
        }
        
        .calc-btn {
            background: #87CEEB;
            color: #1e3c72;
            padding: 12px 30px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        
        .calc-btn:hover {
            background: #5F9EA0;
            transform: translateY(-2px);
        }
        
        .result-box {
            background: rgba(0,255,0,0.1);
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            border: 1px solid #90EE90;
        }
        
        .warning {
            background: rgba(255,165,0,0.2);
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #FFA500;
            margin: 15px 0;
        }
        
        .data-viz {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
            text-align: center;
        }
        
        .chart-placeholder {
            width: 100%;
            height: 200px;
            background: linear-gradient(45deg, #87CEEB, #5F9EA0);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            color: white;
            margin: 15px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üêã Coastal Marine Mammal Assessment Platform</h1>
            <p class="subtitle">Comprehensive evaluation of marine mammals in coastal ecosystems by Claudio Iturra</p>
        </header>
        
        <div class="nav-tabs">
            <button class="tab-btn active" onclick="showTab('species')">Marine Species</button>
            <button class="tab-btn" onclick="showTab('detection')">Detection Methods</button>
            <button class="tab-btn" onclick="showTab('oceanography')">Oceanographic Factors</button>
            <button class="tab-btn" onclick="showTab('equations')">Equations & Models</button>
            <button class="tab-btn" onclick="showTab('assessment')">Live Assessment</button>
        </div>
        
        <!-- Species Tab -->
        <div id="species" class="tab-content active">
            <h2>üêã Coastal Marine Mammals</h2>
            <div class="species-grid">
                <div class="species-card">
                    <h3>üêã Baleen Whales</h3>
                    <p><strong>Species:</strong> Gray whale, Humpback whale, Blue whale, Minke whale</p>
                    <p><strong>Habitat:</strong> Migrate through coastal waters, feed in upwelling zones</p>
                    <p><strong>Detection:</strong> Large acoustic signatures, surface behavior</p>
                    <p><strong>Key Factors:</strong> Krill abundance, water temperature 8-15¬∞C</p>
                </div>
                
                <div class="species-card">
                    <h3>üê¨ Toothed Whales</h3>
                    <p><strong>Species:</strong> Orcas, Pilot whales, Sperm whales</p>
                    <p><strong>Habitat:</strong> Deep coastal waters, continental shelf edge</p>
                    <p><strong>Detection:</strong> Echolocation clicks, social calls</p>
                    <p><strong>Key Factors:</strong> Fish/squid abundance, depth >200m</p>
                </div>
                
                <div class="species-card">
                    <h3>üê¨ Dolphins & Porpoises</h3>
                    <p><strong>Species:</strong> Bottlenose dolphin, Harbor porpoise, Pacific white-sided dolphin</p>
                    <p><strong>Habitat:</strong> Nearshore waters, bays, estuaries</p>
                    <p><strong>Detection:</strong> High-frequency echolocation, group behavior</p>
                    <p><strong>Key Factors:</strong> Small fish schools, salinity 32-35 ppt</p>
                </div>
                
                <div class="species-card">
                    <h3>ü¶≠ Pinnipeds</h3>
                    <p><strong>Species:</strong> Harbor seals, Sea lions, Elephant seals</p>
                    <p><strong>Habitat:</strong> Rocky shores, beaches, kelp forests</p>
                    <p><strong>Detection:</strong> Haul-out sites, diving patterns</p>
                    <p><strong>Key Factors:</strong> Breeding sites, fish availability</p>
                </div>
                
                <div class="species-card">
                    <h3>ü¶¶ Sea Otters</h3>
                    <p><strong>Species:</strong> Southern sea otter</p>
                    <p><strong>Habitat:</strong> Kelp forests, shallow coastal waters</p>
                    <p><strong>Detection:</strong> Surface feeding, tool use behavior</p>
                    <p><strong>Key Factors:</strong> Kelp coverage, urchin/shellfish density</p>
                </div>
                
                <div class="species-card">
                    <h3>üêã Rare Species</h3>
                    <p><strong>Species:</strong> Vaquita, North Atlantic right whale, Manatees</p>
                    <p><strong>Habitat:</strong> Specific coastal regions, warm waters</p>
                    <p><strong>Detection:</strong> Specialized monitoring, satellite tracking</p>
                    <p><strong>Key Factors:</strong> Critical habitat protection, low vessel traffic</p>
                </div>
            </div>
        </div>
        
        <!-- Detection Methods Tab -->
        <div id="detection" class="tab-content">
            <h2>üîç Detection & Monitoring Methods</h2>
            <div class="detection-methods">
                <div class="method-card">
                    <div class="method-icon">üé§</div>
                    <h3>Passive Acoustic Monitoring</h3>
                    <p>Hydrophones detect vocalizations, echolocation clicks, and breathing sounds</p>
                    <p><strong>Range:</strong> 1-50 km depending on species</p>
                    <p><strong>Frequency:</strong> 10 Hz - 150 kHz</p>
                </div>
                
                <div class="method-card">
                    <div class="method-icon">üì°</div>
                    <h3>Satellite Telemetry</h3>
                    <p>GPS/Argos tags track movement patterns and diving behavior</p>
                    <p><strong>Accuracy:</strong> ¬±150m - 1km</p>
                    <p><strong>Duration:</strong> Weeks to years</p>
                </div>
                
                <div class="method-card">
                    <div class="method-icon">üëÅÔ∏è</div>
                    <h3>Visual Surveys</h3>
                    <p>Ship-based, aerial, and shore-based observations</p>
                    <p><strong>Range:</strong> 0-10 km visibility dependent</p>
                    <p><strong>Conditions:</strong> Beaufort scale ‚â§3</p>
                </div>
                
                <div class="method-card">
                    <div class="method-icon">üåä</div>
                    <h3>Environmental DNA</h3>
                    <p>Water sampling to detect genetic material</p>
                    <p><strong>Detection:</strong> Species presence/absence</p>
                    <p><strong>Sensitivity:</strong> ng/L concentrations</p>
                </div>
                
                <div class="method-card">
                    <div class="method-icon">üì∑</div>
                    <h3>Camera Traps & Drones</h3>
                    <p>Automated monitoring of haul-out sites and surface behavior</p>
                    <p><strong>Coverage:</strong> 24/7 monitoring</p>
                    <p><strong>Resolution:</strong> Individual identification</p>
                </div>
                
                <div class="method-card">
                    <div class="method-icon">üõ∞Ô∏è</div>
                    <h3>Remote Sensing</h3>
                    <p>Satellite imagery for habitat assessment and large whale detection</p>
                    <p><strong>Resolution:</strong> 0.3-30m pixels</p>
                    <p><strong>Coverage:</strong> Global, daily revisit</p>
                </div>
            </div>
        </div>
        
        <!-- Oceanographic Factors Tab -->
        <div id="oceanography" class="tab-content">
            <h2>üåä Oceanographic Parameters</h2>
            <div class="parameter-grid">
                <div class="parameter-card">
                    <h3>üå°Ô∏è Temperature</h3>
                    <p><strong>Surface:</strong> 8-25¬∞C optimal range</p>
                    <p><strong>Thermocline:</strong> Depth varies 20-200m</p>
                    <p><strong>Impact:</strong> Affects prey distribution and metabolism</p>
                    <p><strong>Measurement:</strong> CTD, satellite SST, autonomous gliders</p>
                </div>
                
                <div class="parameter-card">
                    <h3>üßÇ Salinity</h3>
                    <p><strong>Range:</strong> 32-36 ppt in coastal waters</p>
                    <p><strong>Halocline:</strong> Sharp gradients near river mouths</p>
                    <p><strong>Impact:</strong> Affects buoyancy and osmoregulation</p>
                    <p><strong>Sources:</strong> River discharge, precipitation, evaporation</p>
                </div>
                
                <div class="parameter-card">
                    <h3>üí® Wind Patterns</h3>
                    <p><strong>Upwelling Winds:</strong> Parallel to coast, 5-15 m/s</p>
                    <p><strong>Seasonal:</strong> Spring/summer upwelling favorable</p>
                    <p><strong>Impact:</strong> Drives nutrient transport and primary productivity</p>
                    <p><strong>Measurement:</strong> Buoys, satellites, weather stations</p>
                </div>
                
                <div class="parameter-card">
                    <h3>‚¨ÜÔ∏è Upwelling/Downwelling</h3>
                    <p><strong>Upwelling Index:</strong> m¬≥/s per 100m coastline</p>
                    <p><strong>Indicators:</strong> Cold SST, high chlorophyll</p>
                    <p><strong>Impact:</strong> Brings nutrients to surface, supports food web</p>
                    <p><strong>Hotspots:</strong> California, Peru, Benguela currents</p>
                </div>
                
                <div class="parameter-card">
                    <h3>üåä Ocean Circulation</h3>
                    <p><strong>Currents:</strong> 0.1-2.0 m/s surface velocity</p>
                    <p><strong>Eddies:</strong> 10-200 km diameter</p>
                    <p><strong>Impact:</strong> Transport prey, affect migration routes</p>
                    <p><strong>Measurement:</strong> ADCP, drifters, altimetry</p>
                </div>
                
                <div class="parameter-card">
                    <h3>üß™ Nutrients</h3>
                    <p><strong>Nitrate:</strong> 0-45 Œºmol/L</p>
                    <p><strong>Phosphate:</strong> 0-3 Œºmol/L</p>
                    <p><strong>Silicate:</strong> 0-150 Œºmol/L</p>
                    <p><strong>Impact:</strong> Limits primary productivity and food availability</p>
                </div>
                
                <div class="parameter-card">
                    <h3>üêü Prey Availability</h3>
                    <p><strong>Krill:</strong> 0.1-100 g/m¬≥ biomass</p>
                    <p><strong>Fish Schools:</strong> Anchovy, sardine, herring</p>
                    <p><strong>Zooplankton:</strong> Copepods, euphausiids</p>
                    <p><strong>Measurement:</strong> Acoustic surveys, net sampling</p>
                </div>
                
                <div class="parameter-card">
                    <h3>üèûÔ∏è Freshwater Input</h3>
                    <p><strong>River Discharge:</strong> 10-10,000 m¬≥/s</p>
                    <p><strong>Seasonal Variation:</strong> Spring snowmelt peaks</p>
                    <p><strong>Impact:</strong> Creates estuarine gradients, affects salinity</p>
                    <p><strong>Nutrients:</strong> Terrestrial input, agricultural runoff</p>
                </div>
            </div>
        </div>
        
        <!-- Equations Tab -->
        <div id="equations" class="tab-content">
            <h2>üìä Mathematical Models & Equations</h2>
            
            <div class="equation-box">
                <h3>Upwelling Index Calculation</h3>
                <div class="equation">UI = (œÑ √ó œÅ √ó f) / (œÅw √ó f √ó L)</div>
                <p>Where: œÑ = wind stress, œÅ = air density, f = Coriolis parameter, œÅw = water density, L = coastline length</p>
            </div>
            
            <div class="equation-box">
                <h3>Ekman Transport</h3>
                <div class="equation">Me = œÑ / (œÅw √ó f)</div>
                <p>Offshore transport per unit width due to wind stress</p>
            </div>
            
            <div class="equation-box">
                <h3>Primary Productivity (Light-Limited)</h3>
                <div class="equation">PP = Pmax √ó (I / (I + Ik)) √ó exp(-I/Is)</div>
                <p>Where: Pmax = maximum photosynthesis rate, I = irradiance, Ik = saturation parameter</p>
            </div>
            
            <div class="equation-box">
                <h3>Prey Density Index</h3>
                <div class="equation">PDI = (Biomass √ó Accessibility) / (Search_Area √ó Energy_Cost)</div>
                <p>Combines prey abundance with foraging efficiency</p>
            </div>
            
            <div class="equation-box">
                <h3>Habitat Suitability Model</h3>
                <div class="equation">HSI = Œ£(Wi √ó Si)</div>
                <p>Where: Wi = weight for parameter i, Si = suitability score for parameter i</p>
            </div>
            
            <div class="equation-box">
                <h3>Detection Probability</h3>
                <div class="equation">P(detect) = 1 - exp(-Œª √ó effort √ó availability)</div>
                <p>Probability of detecting animals given survey effort and availability</p>
            </div>
            
            <div class="equation-box">
                <h3>Acoustic Range Equation</h3>
                <div class="equation">Range = 10^((SL - TL - NL + DI)/20)</div>
                <p>Where: SL = source level, TL = transmission loss, NL = noise level, DI = directivity index</p>
            </div>
            
            <div class="equation-box">
                <h3>Metabolic Rate Scaling</h3>
                <div class="equation">MR = a √ó M^b √ó exp(c √ó T)</div>
                <p>Where: a = normalization constant, M = body mass, b = scaling exponent (~0.75), T = temperature</p>
            </div>
        </div>
        
        <!-- Assessment Tab -->
        <div id="assessment" class="tab-content">
            <h2>üî¨ Live Marine Mammal Assessment</h2>
            
            <div class="calculator">
                <h3>Habitat Suitability Calculator</h3>
                <div class="input-group">
                    <label>Sea Surface Temperature (¬∞C):</label>
                    <input type="number" id="sst" value="12" min="0" max="30" step="0.1">
                </div>
                
                <div class="input-group">
                    <label>Salinity (ppt):</label>
                    <input type="number" id="salinity" value="34" min="20" max="40" step="0.1">
                </div>
                
                <div class="input-group">
                    <label>Chlorophyll-a (mg/m¬≥):</label>
                    <input type="number" id="chlorophyll" value="2.5" min="0" max="50" step="0.1">
                </div>
                
                <div class="input-group">
                    <label>Wind Speed (m/s):</label>
                    <input type="number" id="windspeed" value="8" min="0" max="25" step="0.1">
                </div>
                
                <div class="input-group">
                    <label>Distance to Shore (km):</label>
                    <input type="number" id="distance" value="5" min="0" max="200" step="0.1">
                </div>
                
                <div class="input-group">
                    <label>Target Species:</label>
                    <select id="species-select">
                        <option value="humpback">Humpback Whale</option>
                        <option value="gray">Gray Whale</option>
                        <option value="dolphin">Bottlenose Dolphin</option>
                        <option value="seal">Harbor Seal</option>
                        <option value="otter">Sea Otter</option>
                    </select>
                </div>
                
                <button class="calc-btn" onclick="calculateHabitat()">Calculate Habitat Suitability</button>
                
                <div id="habitat-result" class="result-box" style="display:none;">
                    <h4>Assessment Results:</h4>
                    <div id="suitability-score"></div>
                    <div id="detection-probability"></div>
                    <div id="recommendations"></div>
                </div>
            </div>
            
            <div class="calculator">
                <h3>Upwelling Index Calculator</h3>
                <div class="input-group">
                    <label>Wind Stress (N/m¬≤):</label>
                    <input type="number" id="wind-stress" value="0.1" min="0" max="1" step="0.01">
                </div>
                
                <div class="input-group">
                    <label>Latitude (degrees):</label>
                    <input type="number" id="latitude" value="36" min="-90" max="90" step="0.1">
                </div>
                
                <button class="calc-btn" onclick="calculateUpwelling()">Calculate Upwelling Index</button>
                
                <div id="upwelling-result" class="result-box" style="display:none;">
                    <div id="upwelling-value"></div>
                    <div id="upwelling-interpretation"></div>
                </div>
            </div>
            
            <div class="data-viz">
                <h3>Environmental Conditions Visualization</h3>
                <div class="chart-placeholder" id="temp-chart">
                    Temperature Profile: Click "Update Charts" to visualize
                </div>
                <div class="chart-placeholder" id="productivity-chart">
                    Productivity Index: Click "Update Charts" to visualize
                </div>
                <button class="calc-btn" onclick="updateCharts()">Update Charts</button>
            </div>
            
            <div class="warning">
                <h4>‚ö†Ô∏è Important Considerations:</h4>
                <ul>
                    <li>This is a simplified model for demonstration purposes</li>
                    <li>Real assessments require extensive field data and validation</li>
                    <li>Weather conditions significantly affect detection success</li>
                    <li>Seasonal migrations must be considered for accurate predictions</li>
                    <li>Local regulations may restrict research activities</li>
                </ul>
            </div>
        </div>
    </div>
    
    <script>
        function showTab(tabName) {
            // Hide all tab contents
            const contents = document.querySelectorAll('.tab-content');
            contents.forEach(content => content.classList.remove('active'));
            
            // Remove active class from all buttons
            const buttons = document.querySelectorAll('.tab-btn');
            buttons.forEach(btn => btn.classList.remove('active'));
            
            // Show selected tab and activate button
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }
        
        function calculateHabitat() {
            const sst = parseFloat(document.getElementById('sst').value);
            const salinity = parseFloat(document.getElementById('salinity').value);
            const chlorophyll = parseFloat(document.getElementById('chlorophyll').value);
            const windspeed = parseFloat(document.getElementById('windspeed').value);
            const distance = parseFloat(document.getElementById('distance').value);
            const species = document.getElementById('species-select').value;
            
            // Species-specific optimal ranges
            const speciesParams = {
                humpback: { tempRange: [8, 18], salinityRange: [32, 35], distanceRange: [1, 50] },
                gray: { tempRange: [6, 16], salinityRange: [31, 34], distanceRange: [0, 20] },
                dolphin: { tempRange: [12, 25], salinityRange: [33, 36], distanceRange: [0, 10] },
                seal: { tempRange: [8, 20], salinityRange: [32, 35], distanceRange: [0, 5] },
                otter: { tempRange: [10, 18], salinityRange: [32, 34], distanceRange: [0, 2] }
            };
            
            const params = speciesParams[species];
            
            // Calculate suitability scores (0-1)
            let tempScore = 1 - Math.abs(sst - (params.tempRange[0] + params.tempRange[1])/2) / 10;
            let salinityScore = 1 - Math.abs(salinity - (params.salinityRange[0] + params.salinityRange[1])/2) / 5;
            let productivityScore = Math.min(chlorophyll / 5, 1); // Higher chlorophyll = better
            let distanceScore = distance <= params.distanceRange[1] ? 1 - distance / params.distanceRange[1] : 0;
            
            // Ensure scores are between 0 and 1
            tempScore = Math.max(0, Math.min(1, tempScore));
            salinityScore = Math.max(0, Math.min(1, salinityScore));
            productivityScore = Math.max(0, Math.min(1, productivityScore));
            distanceScore = Math.max(0, Math.min(1, distanceScore));
            
            // Overall habitat suitability (weighted average)
            const habitatSuitability = (tempScore * 0.3 + salinityScore * 0.2 + productivityScore * 0.3 + distanceScore * 0.2);
            
            // Detection probability based on conditions
            const detectionProb = habitatSuitability * (1 - windspeed / 20) * 0.8;
            
            // Display results
            const resultDiv = document.getElementById('habitat-result');
            const suitabilityDiv = document.getElementById('suitability-score');
            const detectionDiv = document.getElementById('detection-probability');
            const recommendationsDiv = document.getElementById('recommendations');
            
            suitabilityDiv.innerHTML = `<strong>Habitat Suitability:</strong> ${(habitatSuitability * 100).toFixed(1)}% (${habitatSuitability > 0.7 ? 'Excellent' : habitatSuitability > 0.5 ? 'Good' : habitatSuitability > 0.3 ? 'Fair' : 'Poor'})`;
            detectionDiv.innerHTML = `<strong>Detection Probability:</strong> ${(detectionProb * 100).toFixed(1)}%`;
            
            let recommendations = '<strong>Recommendations:</strong><ul>';
            if (habitatSuitability > 0.6) {
                recommendations += '<li>‚úÖ Excellent conditions for surveys</li>';
            }
            if (windspeed > 10) {
                recommendations += '<li>‚ö†Ô∏è High winds may reduce detection success</li>';
            }
            if (chlorophyll < 1) {
                recommendations += '<li>üìä Low productivity - consider deeper waters</li>';
            }
            if (distance > params.distanceRange[1]) {
                recommendations += '<li>üåä Consider moving closer to shore for this species</li>';
            }
            recommendations += '</ul>';
            
            recommendationsDiv.innerHTML = recommendations;
            resultDiv.style.display = 'block';
        }
        
        function calculateUpwelling() {
            const windStress = parseFloat(document.getElementById('wind-stress').value);
            const latitude = parseFloat(document.getElementById('latitude').value);
            
            // Coriolis parameter
            const omega = 7.27e-5; // Earth's rotation rate (rad/s)
            const f = 2 * omega * Math.sin(latitude * Math.PI / 180);
            
            // Water density
            const rho_w = 1025; // kg/m¬≥
            
            // Upwelling index (m¬≥/s per 100m coastline)
            const upwellingIndex = (windStress / (rho_w * Math.abs(f))) * 100;
            
            const resultDiv = document.getElementById('upwelling-result');
            const valueDiv = document.getElementById('upwelling-value');
            const interpretationDiv = document.getElementById('upwelling-interpretation');
            
            valueDiv.innerHTML = `<strong>Upwelling Index:</strong> ${upwellingIndex.toFixed(2)} m¬≥/s per 100m coastline`;
            
            let interpretation = '<strong>Interpretation:</strong> ';
            if (upwellingIndex > 100) {
                interpretation += 'Strong upwelling - Excellent for marine productivity';
            } else if (upwellingIndex > 50) {
                interpretation += 'Moderate upwelling - Good conditions for marine life';
            } else if (upwellingIndex > 0) {
                interpretation += 'Weak upwelling - Limited nutrient transport';
            } else {
                interpretation += 'Downwelling conditions - Nutrients pushed offshore';
            }
            
            interpretationDiv.innerHTML = interpretation;
            resultDiv.style.display = 'block';
        }
        
        function updateCharts() {
            const tempChart = document.getElementById('temp-chart');
            const productivityChart = document.getElementById('productivity-chart');
            
            // Simulate temperature profile
            const sst = parseFloat(document.getElementById('sst').value) || 15;
            tempChart.innerHTML = `
                <div style="text-align: left; padding: 20px;">
                    <strong>Temperature Profile:</strong><br>
                    Surface: ${sst}¬∞C<br>
                    10m: ${(sst - 1).toFixed(1)}¬∞C<br>
                    50m: ${(sst - 4).toFixed(1)}¬∞C<br>
                    100m: ${(sst - 8).toFixed(1)}¬∞C<br>
                    Thermocline: ~${Math.round(20 + sst)}m depth
                </div>
            `;
            
            // Simulate productivity index
            const chlorophyll = parseFloat(document.getElementById('chlorophyll').value) || 2;
            const productivity = chlorophyll * 50; // Simplified conversion
            productivityChart.innerHTML = `
                <div style="text-align: left; padding: 20px;">
                    <strong>Productivity Indicators:</strong><br>
                    Chlorophyll-a: ${chlorophyll} mg/m¬≥<br>
                    Primary Productivity: ~${productivity.toFixed(0)} mgC/m¬≤/day<br>
                    Trophic Status: ${chlorophyll > 5 ? 'Eutrophic' : chlorophyll > 1 ? 'Mesotrophic' : 'Oligotrophic'}<br>
                    Food Web Support: ${chlorophyll > 3 ? 'High' : chlorophyll > 1 ? 'Moderate' : 'Low'}
                </div>
            `;
        }
        
        // Initialize with default calculations
        setTimeout(() => {
            calculateHabitat();
            calculateUpwelling();
            updateCharts();
        }, 1000);
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'96d1210c6568e7d9',t:'MTc1NDg0NjA2MS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
