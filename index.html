<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>claudio-i</title>
<style>
  :root{
    --bg1:#031a2b; --bg2:#0a3653;
    --ink:#e7f3ff; --muted:#a8c6de;
    --c1:#7aa6ff;   /* diurnal */
    --c2:#68e0cf;   /* semi-diurnal */
    --c3:#ffd166;   /* inertial */
    --cSum:#ffffff; /* sum */
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--bg1),var(--bg2));color:var(--ink);font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
  .wrap{min-height:100svh;display:grid;grid-template-rows:auto auto 1fr auto;gap:16px;padding:24px}
  header{text-align:center}
  h1{margin:.2rem 0 0 0;font-weight:800;letter-spacing:.3px;font-size:clamp(28px,5.5vw,56px)}
  .sub{margin:.2rem 0 0 0;font-size:clamp(14px,2.2vw,20px);opacity:.95}
  .email{margin:.4rem 0 0 0;font-size:clamp(13px,2vw,18px);color:var(--muted)}
  .panel{background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.12);border-radius:16px;padding:14px;backdrop-filter:blur(2px);box-shadow:0 10px 30px rgba(0,0,0,.25)}
  .legend{display:flex;flex-wrap:wrap;gap:10px;align-items:center;justify-content:center;margin-top:8px;font-size:14px;color:var(--muted)}
  .key{display:inline-flex;align-items:center;gap:6px;padding:4px 8px;border-radius:999px;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.12)}
  .dot{width:12px;height:12px;border-radius:50%}
  .dot.diurnal{background:var(--c1)}
  .dot.semi{background:var(--c2)}
  .dot.inertial{background:var(--c3)}
  .dot.sum{background:var(--cSum)}
  canvas{width:100%;height:54vh;display:block;border-radius:12px}

  .controls{display:grid;grid-template-columns:repeat(auto-fit,minmax(230px,1fr));gap:10px}
  .group{display:flex;flex-direction:column;gap:6px}
  .row{display:flex;align-items:center;justify-content:space-between;gap:10px}
  .row .label{display:flex;align-items:center;gap:8px}
  .sw{display:flex;align-items:center;gap:8px}
  input[type="range"]{width:100%}
  .note{font-size:12px;color:var(--muted);text-align:center;margin-top:8px}
  .btns{display:flex;flex-wrap:wrap;gap:10px;justify-content:center}
  button{background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.18);color:var(--ink);padding:8px 12px;border-radius:10px;cursor:pointer}
  button:hover{background:rgba(255,255,255,.14)}
  footer{text-align:center;font-size:12px;color:var(--muted)}
</style>
</head>
<body>
  <div class="wrap">
    <header>
<a href="https://filedn.com/lN5kkkhitUg4RQKW6Q6qJBV/claudio-iturra/"
   style="color:#fff; text-decoration:none;">
  Local-Server I -
</a>
<a href="https://github.com/claudio-iturra"
   style="color:#fff; text-decoration:none;">
  Git-Hub -
</a>
<a href="https://u.pcloud.link/publink/show?code=kZ6X7M5ZgRTyrMeSvwBnh6LTF3wOa8fDU1gk"
   style="color:#fff; text-decoration:none;">
  Ocean/Atmosphere Data-analysis -
</a>
<a href="https://filejump.com/sf/sk2VYxJ5JFlGc9E86T8vjk8tMgyxxXpUv5HBK366"
   style="color:#fff; text-decoration:none;">
  Server II
</a>



      <h1>Claudio Iturra</h1>
      <p class="sub">Dr(c). in Oceanography, Marine-Biologist</p>
      <p class="sub">University of Concepción, Concepción, Chile</p>
      <p class="email">claudio-i@outlook.com</p>
    </header>

    <!-- Controls -->
    <section class="panel controls" aria-label="Plot controls">
      <div class="group">
        <div class="row">
          <span class="label"><span class="dot diurnal"></span> Diurnal ~ 24 h</span>
          <label class="sw"><input type="checkbox" id="showDiurnal" checked> Show</label>
        </div>
        <div class="row">
          <label for="ampDiurnal">Amplitude</label>
          <span><output id="valAmpDiurnal">36</output> px</span>
        </div>
        <input id="ampDiurnal" type="range" min="0" max="100" step="1" value="36">
      </div>

      <div class="group">
        <div class="row">
          <span class="label"><span class="dot semi"></span> Semi-diurnal ~ 12.42 h</span>
          <label class="sw"><input type="checkbox" id="showSemi" checked> Show</label>
        </div>
        <div class="row">
          <label for="ampSemi">Amplitude</label>
          <span><output id="valAmpSemi">28</output> px</span>
        </div>
        <input id="ampSemi" type="range" min="0" max="100" step="1" value="28">
      </div>

      <div class="group">
        <div class="row">
          <span class="label"><span class="dot inertial"></span> Inertial (36°S) ~ 20.36 h</span>
          <label class="sw"><input type="checkbox" id="showInertial" checked> Show</label>
        </div>
        <div class="row">
          <label for="ampInertial">Amplitude</label>
          <span><output id="valAmpInertial">44</output> px</span>
        </div>
        <input id="ampInertial" type="range" min="0" max="100" step="1" value="44">
      </div>

      <div class="group">
        <div class="row">
          <span class="label"><span class="dot sum"></span> Sum (all bands)</span>
          <label class="sw"><input type="checkbox" id="showSum" checked> Show</label>
        </div>
        <div class="row">
          <label for="speed">Animation speed</label>
          <span><output id="valSpeed">6</output> h/s</span>
        </div>
        <input id="speed" type="range" min="1" max="24" step="1" value="6">
      </div>
    </section>

    <!-- Plot -->
    <section class="panel" aria-label="Animated line-plot of ocean wave bands">
      <canvas id="plot" aria-label="Animated plot canvas"></canvas>

      <div class="legend" role="list" aria-label="Legend">
        <span class="key" role="listitem"><span class="dot diurnal"></span> Diurnal tide ~ 24 h</span>
        <span class="key" role="listitem"><span class="dot semi"></span> Semi-diurnal tide ~ 12.42 h</span>
        <span class="key" role="listitem"><span class="dot inertial"></span> Inertial (36°S) ~ 20.36 h</span>
        <span class="key" role="listitem"><span class="dot sum"></span> Sum</span>
      </div>

      <div class="btns">
        <button id="pauseBtn" aria-pressed="false">Pause</button>
        <button id="resetBtn">Reset phase</button>
      </div>

      <p class="note">
        x-axis shows 72 hours; grid every 6 h (labels every 12 h). White curve = summation.
      </p>
    </section>

    <footer>M2≈12.42 h, K1≈24 h, f<sub>inertial</sub>=2Ωsinφ → T≈20.36 h at φ = −36°.</footer>
  </div>

<script>
(function(){
  const canvas = document.getElementById('plot');
  const ctx = canvas.getContext('2d');

  // Periods (hours)
  const T_diurnal  = 24.0;   // ~K1
  const T_semi     = 12.42;  // M2
  const T_inertial = 20.36;  // φ = -36°
  const W = 2*Math.PI;
  const w = {
    diurnal:  W / T_diurnal,
    semi:     W / T_semi,
    inertial: W / T_inertial
  };

  // Window & padding
  const HOURS_WINDOW = 72;
  const PAD_L = 42, PAD_R = 16, PAD_T = 16, PAD_B = 28;

  // Controls
  const showDiurnal = document.getElementById('showDiurnal');
  const showSemi = document.getElementById('showSemi');
  const showInertial = document.getElementById('showInertial');
  const showSum = document.getElementById('showSum');

  const ampDiurnal = document.getElementById('ampDiurnal');
  const ampSemi    = document.getElementById('ampSemi');
  const ampInertial= document.getElementById('ampInertial');

  const valAmpDiurnal = document.getElementById('valAmpDiurnal');
  const valAmpSemi    = document.getElementById('valAmpSemi');
  const valAmpInertial= document.getElementById('valAmpInertial');

  const speed    = document.getElementById('speed');
  const valSpeed = document.getElementById('valSpeed');

  const pauseBtn = document.getElementById('pauseBtn');
  const resetBtn = document.getElementById('resetBtn');

  // Colors
  const col = {
    diurnal:  css('--c1'),
    semi:     css('--c2'),
    inertial: css('--c3'),
    sum:      css('--cSum'),
    ink:      css('--ink'),
    muted:    css('--muted')
  };
  function css(name){ return getComputedStyle(document.documentElement).getPropertyValue(name).trim(); }

  // State
  let hoursPerSecond = Number(speed.value);
  let A = {
    diurnal:  Number(ampDiurnal.value),
    semi:     Number(ampSemi.value),
    inertial: Number(ampInertial.value)
  };
  let t0 = performance.now();
  let phase0 = 0;
  let paused = false;

  // Wire UI
  const updateAmp = () => {
    A.diurnal  = Number(ampDiurnal.value);  valAmpDiurnal.textContent = A.diurnal;
    A.semi     = Number(ampSemi.value);     valAmpSemi.textContent    = A.semi;
    A.inertial = Number(ampInertial.value); valAmpInertial.textContent= A.inertial;
  };
  ampDiurnal.addEventListener('input', updateAmp);
  ampSemi.addEventListener('input', updateAmp);
  ampInertial.addEventListener('input', updateAmp);

  speed.addEventListener('input', ()=>{
    hoursPerSecond = Number(speed.value);
    valSpeed.textContent = hoursPerSecond;
  });

  pauseBtn.addEventListener('click', ()=>{
    paused = !paused;
    pauseBtn.textContent = paused ? 'Resume' : 'Pause';
    pauseBtn.setAttribute('aria-pressed', String(paused));
    t0 = performance.now();
  });

  resetBtn.addEventListener('click', ()=>{
    phase0 = 0;
    t0 = performance.now();
  });

  // Resize DPR-aware
  function resize(){
    const dpr = Math.max(1, Math.floor(window.devicePixelRatio || 1));
    const cssW = canvas.clientWidth;
    const cssH = canvas.clientHeight;
    canvas.width  = Math.floor(cssW * dpr);
    canvas.height = Math.floor(cssH * dpr);
    ctx.setTransform(dpr,0,0,dpr,0,0);
  }
  window.addEventListener('resize', resize, {passive:true});
  resize();

  // Axes & grid
  function drawAxes(){
    const w = canvas.clientWidth, h = canvas.clientHeight;
    const gw = w - PAD_L - PAD_R;
    const gh = h - PAD_T - PAD_B;

    ctx.save();
    ctx.translate(PAD_L, PAD_T);

    // grid
    ctx.strokeStyle = 'rgba(255,255,255,0.08)';
    ctx.lineWidth = 1;

    const xMajor = 12; // every 6h over 72h
    for(let i=0;i<=xMajor;i++){
      const x = (i/xMajor)*gw;
      ctx.beginPath(); ctx.moveTo(x,0); ctx.lineTo(x,gh); ctx.stroke();
    }

    const yLines = 4;
    for(let j=-yLines;j<=yLines;j++){
      const y = gh/2 + (j/yLines)*(gh/2);
      ctx.beginPath(); ctx.moveTo(0,y); ctx.lineTo(gw,y); ctx.stroke();
    }

    // labels
    ctx.fillStyle = col.muted;
    ctx.font = '12px system-ui, -apple-system, Segoe UI, Roboto';

    ctx.textAlign = 'center'; ctx.textBaseline = 'top';
    for(let hr=0; hr<=HOURS_WINDOW; hr+=6){
      const x = (hr/HOURS_WINDOW)*gw;
      if(hr % 12 === 0){
        ctx.fillText(`${hr}`, x, gh + 6);
      }
    }
    ctx.textAlign = 'left';
    ctx.fillText('Time (hours)', 0, gh + 20);

    ctx.textAlign = 'right'; ctx.textBaseline = 'middle';
    ctx.fillText('+A', -6, 0);
    ctx.fillText('0',  -6, gh/2);
    ctx.fillText('−A', -6, gh);

    ctx.restore();
  }

  function xFromHour(h){
    const gw = canvas.clientWidth - PAD_L - PAD_R;
    return PAD_L + (h / HOURS_WINDOW) * gw;
  }
  function yFromVal(val){
    const gh = canvas.clientHeight - PAD_T - PAD_B;
    const mid = PAD_T + gh/2;
    return mid - val;
  }

  function drawSignal(color, amp, omega, phase, width=2, alpha=1){
    const gw = canvas.clientWidth - PAD_L - PAD_R;
    ctx.save();
    ctx.globalAlpha = alpha;
    ctx.beginPath();
    const N = Math.max(600, Math.floor(gw));
    for(let i=0;i<=N;i++){
      const xpx = PAD_L + (i/N)*gw;
      const hours = (i/N) * HOURS_WINDOW;
      const y = amp * Math.sin(omega*(hours + phase));
      const ypx = yFromVal(y);
      if(i===0) ctx.moveTo(xpx, ypx); else ctx.lineTo(xpx, ypx);
    }
    ctx.strokeStyle = color; ctx.lineWidth = width; ctx.stroke();
    ctx.restore();
  }

  function drawSum(color, width, phase){
    const gw = canvas.clientWidth - PAD_L - PAD_R;
    ctx.save();
    ctx.beginPath();
    const N = Math.max(600, Math.floor(gw));
    for(let i=0;i<=N;i++){
      const xpx = PAD_L + (i/N)*gw;
      const hours = (i/N) * HOURS_WINDOW;
      const y =
        A.diurnal  * Math.sin(w.diurnal *(hours + phase)) +
        A.semi     * Math.sin(w.semi    *(hours + phase)) +
        A.inertial * Math.sin(w.inertial*(hours + phase));
      const ypx = yFromVal(y);
      if(i===0) ctx.moveTo(xpx, ypx); else ctx.lineTo(xpx, ypx);
    }
    ctx.strokeStyle = color; ctx.lineWidth = width; ctx.globalAlpha=0.95;
    ctx.shadowColor = 'rgba(0,0,0,0.35)'; ctx.shadowBlur = 6;
    ctx.stroke();
    ctx.restore();
  }

  function clear(){ ctx.clearRect(0,0,canvas.clientWidth,canvas.clientHeight); }

  function frame(now){
    if(!paused){
      const dtSec = (now - t0) / 1000;
      const tHours = dtSec * hoursPerSecond;
      const phaseShift = tHours + phase0;

      clear();
      drawAxes();

      // Bands (respect visibility)
      if(showSemi.checked)     drawSignal(col.semi,     A.semi,     w.semi,     phaseShift, 2.0, 0.95);
      if(showDiurnal.checked)  drawSignal(col.diurnal,  A.diurnal,  w.diurnal,  phaseShift, 2.0, 0.95);
      if(showInertial.checked) drawSignal(col.inertial, A.inertial, w.inertial, phaseShift, 2.2, 0.95);

      if(showSum.checked) drawSum(col.sum, 3.2, phaseShift);
    }
    requestAnimationFrame(frame);
  }
  requestAnimationFrame(frame);

  // Observe CSS var changes (optional)
  const obs = new MutationObserver(()=>{
    col.diurnal  = css('--c1');
    col.semi     = css('--c2');
    col.inertial = css('--c3');
    col.sum      = css('--cSum');
    col.ink      = css('--ink');
    col.muted    = css('--muted');
  });
  obs.observe(document.documentElement,{attributes:true,attributeFilter:['style','class']});
})();
</script>
</body>
</html>
